<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Samsung Notes - Website Edition</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Quill.js para editor de texto rico -->
  <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
  <script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script>
  <style>
    #drawingCanvas {
      border: 1px solid #e5e5e5;
      touch-action: none;
      background: #f9f9f9;
      border-radius: 8px;
      cursor: crosshair;
    }
    .note-item:hover {
      background-color: #f0f8ff;
    }
    .note-item.selected {
      background-color: #0057b8;
      color: white;
    }
    .tab-button.active {
      font-weight: 600;
      color: #0057b8;
      border-bottom: 2px solid #0057b8;
    }
    .ql-editor {
      font-size: 16px;
    }
  </style>
</head>
<body class="bg-gray-50 h-screen flex flex-col font-sans">
  <header class="bg-blue-900 text-white p-4 flex justify-between items-center shadow-lg">
    <h1 class="text-xl font-bold select-none">Samsung Notes</h1>
    <button id="btnNewNote" class="bg-white text-blue-900 px-4 py-2 rounded-full hover:bg-gray-100 transition">Nova Nota</button>
  </header>

  <div class="flex flex-1 overflow-hidden">
    <!-- Sidebar: Lista de Notas -->
    <aside class="w-80 bg-white border-r border-gray-200 overflow-y-auto">
      <div class="p-4 border-b border-gray-200">
        <p class="text-gray-600 text-sm select-none">Suas Notas</p>
      </div>
      <ul id="notesList" class="divide-y divide-gray-100">
        <!-- Notas ser√£o listadas aqui -->
      </ul>
    </aside>

    <!-- Editor Principal -->
    <main class="flex-1 flex flex-col p-6">
      <div class="flex space-x-6 border-b border-gray-300 mb-4 pb-2">
        <button id="tabText" class="tab-button px-4 py-2 focus:outline-none active select-none" onclick="switchToText()">Texto</button>
        <button id="tabDraw" class="tab-button px-4 py-2 focus:outline-none select-none" onclick="switchToDraw()">Desenho</button>
      </div>

      <!-- Editor de Texto (substitu√≠do por Quill para suporte a destaque) -->
      <div id="editorText" class="flex-1">
        <input id="noteTitle" type="text" class="w-full text-2xl font-bold border-none outline-none bg-transparent mb-4" placeholder="T√≠tulo da Nota" style="color: #0057b8;">
        <div id="textEditor" style="height: 500px;" class="bg-white border border-gray-300 rounded-lg"></div>
      </div>

      <!-- Editor de Desenho -->
      <div id="editorDraw" class="flex-1 hidden relative">
        <input id="noteTitleDraw" type="text" class="w-full text-2xl font-bold border-none outline-none bg-transparent mb-4 select-none" placeholder="T√≠tulo do Desenho">
        <div class="flex-1 relative flex items-center justify-center bg-gray-100 rounded-lg" style="height: 500px;">
          <canvas id="drawingCanvas" width="800" height="500" class="rounded shadow"></canvas>
          <button id="btnClearDrawing" class="absolute top-4 right-4 bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 transition">Limpar</button>
          <button id="btnPenColor" class="absolute top-4 left-4 bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition">Cor do L√°pis</button>
        </div>
        <div class="mt-4 flex space-x-2">
          <button id="btnEraser" class="bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700 transition">Borracha</button>
        </div>
      </div>

      <!-- Barra Inferior -->
      <div class="mt-6 flex justify-between">
        <div class="flex space-x-4">
          <button id="btnSaveNote" class="bg-green-600 text-white px-6 py-3 rounded-full hover:bg-green-700 transition select-none" onclick="saveCurrentNote()">Salvar</button>
          <button id="btnShare" class="bg-blue-600 text-white px-6 py-3 rounded-full hover:bg-blue-700 transition select-none">Compartilhar</button>
        </div>
        <button id="btnDeleteNote" class="bg-red-600 text-white px-6 py-3 rounded-full hover:bg-red-700 transition select-none" onclick="deleteCurrentNote()">Excluir</button>
      </div>
    </main>
  </div>

  <!-- Modal de Destaque (para definir a cor) -->
  <div id="highlightModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden" onclick="closeHighlightModal()">
    <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white" onclick="event.stopPropagation()">
      <div class="mt-3 text-center">
        <h3 class="text-lg leading-6 font-medium text-gray-900">Escolher Cor do Destaque</h3>
        <div class="mt-2 px-7 py-3">
          <div class="grid grid-cols-4 gap-2">
            <button class="w-10 h-10 rounded-full bg-yellow-200 hover:ring-2 hover:ring-yellow-400" onclick="setHighlightColor('#ffff00')"></button>
            <button class="w-10 h-10 rounded-full bg-pink-200 hover:ring-2 hover:ring-pink-400" onclick="setHighlightColor('#ffb3ba')"></button>
            <button class="w-10 h-10 rounded-full bg-blue-200 hover:ring-2 hover:ring-blue-400" onclick="setHighlightColor('#add8e6')"></button>
            <button class="w-10 h-10 rounded-full bg-green-200 hover:ring-2 hover:ring-green-400" onclick="setHighlightColor('#90ee90')"></button>
          </div>
        </div>
        <div class="flex items-center px-4 py-3">
          <button id="noHighlightBtn" class="px-4 py-2 bg-gray-200 text-gray-800 border border-gray-200 rounded-md hover:bg-gray-300" onclick="setHighlightColor('transparent')">Remover Destaque</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Dados das notas: array de objetos {id, title, text, drawingData (base64), createdAt, lastModified}
    let notes = JSON.parse(localStorage.getItem('samsungNotes') || '[]');
    let currentNoteId = null;

    // Quill editor configurado para destaque
    let quill = null;
    let currentHighlightColor = '#ffff00'; // Padr√£o amarelo

    // Elementos do DOM
    const notesList = document.getElementById('notesList');
    const noteTitle = document.getElementById('noteTitle');
    const noteTitleDraw = document.getElementById('noteTitleDraw');
    const drawingCanvas = document.getElementById('drawingCanvas');
    const ctx = drawingCanvas.getContext('2d');
    let drawing = false;
    let lastX = 0;
    let lastY = 0;
    let penColor = '#000000';
    let tool = 'pen'; // 'pen' or 'eraser'
    const btnNewNote = document.getElementById('btnNewNote');
    const btnSaveNote = document.getElementById('btnSaveNote');
    const btnDeleteNote = document.getElementById('btnDeleteNote');
    const btnClearDrawing = document.getElementById('btnClearDrawing');
    const btnPenColor = document.getElementById('btnPenColor');
    const btnEraser = document.getElementById('btnEraser');
    const btnShare = document.getElementById('btnShare');
    const tabText = document.getElementById('tabText');
    const tabDraw = document.getElementById('tabDraw');
    const editorText = document.getElementById('editorText');
    const editorDraw = document.getElementById('editorDraw');
    const highlightModal = document.getElementById('highlightModal');
    const noHighlightBtn = document.getElementById('noHighlightBtn');

    // Inicializar Quill com ferramentas de destaque
    quill = new Quill('#textEditor', {
      theme: 'snow',
      placeholder: 'Escreva sua nota aqui... Selecione texto e clique em "Destaque" na barra para destacar.',
      modules: {
        toolbar: [
          [{ 'font': [] }],
          ['bold', 'italic', 'underline'],
          [{ 'color': [] }],
          [{ 'background': ['yellow', 'pink', 'blue', 'green', 'orange'] }],
          ['highlight'], // Adicionar bot√£o customizado de destaque
          [{ 'list': 'ordered'}, { 'list': 'bullet' }],
          ['link'],
          ['clean']
        ]
      }
    });

    // Adicionar bot√£o customizado de destaque na barra de ferramentas
    const toolbar = quill.getModule('toolbar');
    toolbar.addHandler('highlight', () => {
      const range = quill.getSelection();
      if (range) {
        quill.format('background', currentHighlightColor);
      }
    });
    toolbar.container.appendChild(document.createElement('button')).dataset.quillHandler = 'highlight';
    const highlightBtn = toolbar.container.querySelector('[data-tooltip="Destaque"]');
    if (highlightBtn) {
      highlightBtn.innerHTML = 'üî• Destaque';
      highlightBtn.onclick = () => {
        openHighlightModal();
      };
    }

    // Salvamento no localStorage
    function saveNotesToStorage() {
      localStorage.setItem('samsungNotes', JSON.stringify(notes));
    }

    // Criar nova nota
    function createNewNote() {
      const newNote = {
        id: Date.now(),
        title: '',
        text: '',
        drawingData: null,
        createdAt: new Date().toISOString(),
        lastModified: new Date().toISOString()
      };
      notes.unshift(newNote);
      currentNoteId = newNote.id;
      saveNotesToStorage();
      renderNotesList();
      loadNote(currentNoteId);
    }

    // Renderizar lista de notas
    function renderNotesList() {
      notesList.innerHTML = '';
      if (notes.length === 0) {
        notesList.innerHTML = '<li class="p-6 text-gray-500 select-none text-center">Nenhuma nota encontrada.<br>Clique em "Nova Nota" para come√ßar.</li>';
        clearEditor();
        return;
      }
      notes.forEach(note => {
        const li = document.createElement('li');
        li.className = 'note-item p-4 cursor-pointer flex flex-col border-b border-gray-100 transition';
        if (note.id === currentNoteId) li.classList.add('selected');
        const title = note.title.trim() || 'Nota sem t√≠tulo';
        const previewTextDiv = document.createElement('div');
        previewTextDiv.innerHTML = (note.text || '').substring(0, 100) + (note.text && note.text.length > 100 ? '...' : '');
        const previewText = previewTextDiv.textContent || '(Vazio)';
        const lastModified = new Date(note.lastModified).toLocaleDateString('pt-BR');
        li.innerHTML = `
          <strong class="truncate">${title}</strong>
          <p class="text-sm text-gray-600 truncate">${previewText}</p>
          <small class="text-xs text-gray-500">Modificado em ${lastModified}</small>
        `;
        li.onclick = () => {
          currentNoteId = note.id;
          renderNotesList();
          loadNote(currentNoteId);
        };
        notesList.appendChild(li);
      });
    }

    // Limpar editor
    function clearEditor() {
      quill.setContents([]);
      noteTitle.value = '';
      noteTitleDraw.value = '';
      clearDrawing();
      currentNoteId = null;
    }

    // Carregar nota no editor
    function loadNote(id) {
      const note = notes.find(n => n.id === id);
      if (!note) return;
      noteTitle.value = note.title || '';
      noteTitleDraw.value = note.title || '';
      quill.setContents(JSON.parse(note.text || '{}'));
      if (note.drawingData) {
        const img = new Image();
        img.onload = () => {
          clearDrawing();
          ctx.drawImage(img, 0, 0, drawingCanvas.width, drawingCanvas.height);
        };
        img.src = note.drawingData;
      } else {
        clearDrawing();
      }
    }

    // Salvar nota atual
    function saveCurrentNote() {
      if (currentNoteId === null) {
        alert('Selecione ou crie uma nova nota para salvar.');
        return;
      }
      const note = notes.find(n => n.id === currentNoteId);
      if (!note) return;
      note.title = noteTitle.value || noteTitleDraw.value || '';
      note.text = JSON.stringify(quill.getContents());
      note.drawingData = drawingCanvas.toDataURL();
      note.lastModified = new Date().toISOString();
      saveNotesToStorage();
      renderNotesList();
      alert('Nota salva com sucesso!');
    }

    // Excluir nota atual
    function deleteCurrentNote() {
      if (currentNoteId === null) {
        alert('Nenhuma nota selecionada para excluir.');
        return;
      }
      if (!confirm('Tem certeza que deseja excluir esta nota? A√ß√£o irrevers√≠vel.')) return;
      notes = notes.filter(n => n.id !== currentNoteId);
      saveNotesToStorage();
      if (notes.length > 0) {
        currentNoteId = notes[0].id;
        loadNote(currentNoteId);
      } else {
        currentNoteId = null;
        clearEditor();
      }
      renderNotesList();
    }

    // Compartilhar (simula√ß√£o)
    function shareNote() {
      if (currentNoteId === null) {
        alert('Selecione uma nota para compartilhar.');
        return;
      }
      alert('Recurso de compartilhamento ainda em desenvolvimento. Voc√™ pode copiar o conte√∫do manualmente.');
    }

    // Limpar desenho
    function clearDrawing() {
      ctx.clearRect(0, 0, drawingCanvas.width, drawingCanvas.height);
    }

    // Alterar cor do l√°pis
    function changePenColor() {
      const colors = ['#000000', '#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff'];
      const currentIndex = colors.indexOf(penColor);
      penColor = colors[(currentIndex + 1) % colors.length];
      alert(Cor do l√°pis alterada para: ${penColor});
    }

    // Borracha
    function toggleEraser() {
      tool = tool === 'eraser' ? 'pen' : 'eraser';
      btnEraser.textContent = tool === 'eraser' ? 'Voltar √† L√°pis' : 'Borracha';
    }

    // Modal de destaque
    function openHighlightModal() {
      highlightModal.classList.remove('hidden');
    }
    function closeHighlightModal() {
      highlightModal.classList.add('hidden');
    }
    function setHighlightColor(color) {
      const range = quill.getSelection();
      if (range) {
        if (color === 'transparent') {
          quill.format('background', false); // Remove destaque
        } else {
          quill.format('background', color);
        }
        currentHighlightColor = color;
      }
      closeHighlightModal();
    }

    // Fun√ß√µes de desenho
    function startDrawing(e) {
      drawing = true;
      const rect = drawingCanvas.getBoundingClientRect();
      lastX = (e.touches ? e.touches[0].clientX : e.clientX) - rect.left;
      lastY = (e.touches ? e.touches[0].clientY : e.clientY) - rect.top;
    }
    function draw(e) {
      if (!drawing) return;
      e.preventDefault();
      const rect = drawingCanvas.getBoundingClientRect();
      const x = (e.touches ? e.touches[0].clientX : e.clientX) - rect.left;
      const y = (e.touches ? e.touches[0].clientY : e.clientY) - rect.top;
      ctx.strokeStyle = tool === 'eraser' ? '#ffffff' : penColor; // Borracha √© branca
      ctx.lineWidth = tool === 'eraser' ? 10 : 3;
      ctx.lineCap = 'round';
      ctx.beginPath();
      ctx.moveTo(lastX, lastY);
      ctx.lineTo(x, y);
      ctx.stroke();
      lastX = x;
      lastY = y;
    }
    function stopDrawing() {
      drawing = false;
    }

    // Eventos de abas (simplificado para n√£o inline)
    function switchToText() {
      tabText.classList.add('active');
      tabDraw.classList.remove('active');
      editorText.classList.remove('hidden');
      editorDraw.classList.add('hidden');
    }
    function switchToDraw() {
      tabDraw.classList.add('active');
      tabText.classList.remove('active');
      editorDraw.classList.remove('hidden');
      editorText.classList.add('hidden');
    }

    // Sincronizar t√≠tulos
    noteTitle.addEventListener('input', () => noteTitleDraw.value = noteTitle.value);
    noteTitleDraw.addEventListener('input', () => noteTitle.value = noteTitleDraw.value);

    // Eventos de desenho
    drawingCanvas.addEventListener('mousedown', startDrawing);
    drawingCanvas.addEventListener('touchstart', startDrawing);
    drawingCanvas.addEventListener('mousemove', draw);
    drawingCanvas.addEventListener('touchmove', draw);
    drawingCanvas.addEventListener('mouseup', stopDrawing);
    drawingCanvas.addEventListener('touchend', stopDrawing);
    drawingCanvas.addEventListener('mouseleave', stopDrawing);

    // Eventos bot√µes (simplificado para n√£o inline)
    btnNewNote.addEventListener('click', createNewNote);
    btnClearDrawing.addEventListener('click', () => {
      if (confirm('Limpar todo o desenho?')) clearDrawing();
    });
    btnPenColor.addEventListener('click', changePenColor);
    btnEraser.addEventListener('click', toggleEraser);
    btnShare.addEventListener('click', shareNote);

    // Inicializa√ß√£o
    renderNotesList();
    if (notes.length > 0) {
      currentNoteId = notes[0].id;
      loadNote(currentNoteId);
    } else {
      createNewNote(); // Criar uma nota inicial
    }
  </script>
</body>
</html>
</content>
</create_file>
